{"version":3,"sources":["assets/Scripts/Background.js"],"names":["Constant","require","Background","cc","Class","Component","properties","groundNode","type","Node","groundImg","Sprite","onLoad","_size","winSize","_width","spriteFrame","getRect","width","schedule","onGroundMove","GROUND_MOVE_INTERVAL","x","GROUND_VX"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AAEA,IAAIC,UAAU,GAAGC,EAAE,CAACC,KAAH,CAAS;AACtB,aAASD,EAAE,CAACE,SADU;AAGtBC,EAAAA,UAAU,EAAE;AACR;AACAC,IAAAA,UAAU,EAAE;AACR,iBAAS,EADD;AAERC,MAAAA,IAAI,EAAE,CAACL,EAAE,CAACM,IAAJ;AAFE,KAFJ;AAMR;AACAC,IAAAA,SAAS,EAAE;AACP,iBAAS,IADF;AAEPF,MAAAA,IAAI,EAAEL,EAAE,CAACQ;AAFF;AAPH,GAHU;AAgBtB;AACAC,EAAAA,MAAM,EAAE,kBAAY;AAChB;AACA,SAAKC,KAAL,GAAaV,EAAE,CAACW,OAAhB,CAFgB,CAGhB;;AACA,SAAKC,MAAL,GAAc,KAAKL,SAAL,CAAeM,WAAf,CAA2BC,OAA3B,GAAqCC,KAAnD,CAJgB,CAKhB;;AACA,SAAKC,QAAL,CAAc,KAAKC,YAAnB,EAAiCpB,QAAQ,CAACqB,oBAA1C;AACH,GAxBqB;AA0BtBD,EAAAA,YAAY,EAAE,wBAAW;AACrB,SAAKb,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,IAAwBtB,QAAQ,CAACuB,SAAjC,CADqB,CACuB;;AAC5C,SAAKhB,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,IAAwBtB,QAAQ,CAACuB,SAAjC,CAFqB,CAGrB;;AACA,QAAI,KAAKhB,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKP,MAAL,GAAY,CAAnC,GAAuC,CAAE,KAAKF,KAAL,CAAWK,KAAb,GAAmB,CAA9D,EAAiE;AAC7D,WAAKX,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKf,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKP,MAA5B,GAAqC,CAA5D;AACH;;AACD,QAAI,KAAKR,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKP,MAAL,GAAY,CAAnC,GAAuC,CAAE,KAAKF,KAAL,CAAWK,KAAb,GAAmB,CAA9D,EAAiE;AAC7D,WAAKX,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKf,UAAL,CAAgB,CAAhB,EAAmBe,CAAnB,GAAuB,KAAKP,MAA5B,GAAqC,CAA5D;AACH;AACJ,GApCqB,CAqCtB;AACA;AAEA;;AAxCsB,CAAT,CAAjB","sourceRoot":"/","sourcesContent":["var Constant = require('Constant');\r\n\r\nvar Background = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 地板节点数组\r\n        groundNode: {\r\n            default: [],\r\n            type: [cc.Node]\r\n        },\r\n        // 地板图片对象\r\n        groundImg: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        // 获取屏幕尺寸\r\n        this._size = cc.winSize;\r\n        // 获取地板图片的宽度, getRect(): 获取 SpriteFrame 的纹理矩形区域\r\n        this._width = this.groundImg.spriteFrame.getRect().width;\r\n        // 启动“地板移动控制”计时器\r\n        this.schedule(this.onGroundMove, Constant.GROUND_MOVE_INTERVAL);\r\n    },\r\n\r\n    onGroundMove: function() {\r\n        this.groundNode[0].x += Constant.GROUND_VX; // GROUND_VX：单位时间地板移动速度\r\n        this.groundNode[1].x += Constant.GROUND_VX;\r\n        // 一块地板出画后移动到第二块地板后，交替进行，避免因为地板移动而出画\r\n        if (this.groundNode[0].x + this._width/2 < - this._size.width/2) {\r\n            this.groundNode[0].x = this.groundNode[1].x + this._width - 5;\r\n        }\r\n        if (this.groundNode[1].x + this._width/2 < - this._size.width/2) {\r\n            this.groundNode[1].x = this.groundNode[0].x + this._width - 5;\r\n        }\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}